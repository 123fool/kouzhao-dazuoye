# 口罩检测 - 可视化统计图表说明文档

## 📊 生成的可视化图表

本项目共生成 **5张统计图表**，用于全面展示模型的性能和数据集的特点。

---

## 1️⃣ 图表1: 模型准确率对比 (图表1_模型准确率对比.png)

**图表类型**: 柱状图

**目的**: 比较不同模型在测试集上的整体准确率

**包含内容**:
- SVM模型（基于HOG特征）的准确率
- ResNet18模型（深度学习）的准确率
- 每个模型的准确率百分比显示

**解读**:
- Y轴表示准确率（0-1）
- X轴表示不同的模型
- 柱子越高，模型性能越好
- 可以直观看出两种方法的性能差异

**参考标准**:
- 准确率 > 90% ✓ 优秀
- 准确率 > 80% ✓ 良好  
- 准确率 > 70% ○ 可接受
- 准确率 < 70% ✗ 需要改进

---

## 2️⃣ 图表2: 各类别准确率对比 (图表2_各类别准确率对比.png)

**图表类型**: 分组柱状图

**目的**: 展示每个模型在不同类别上的准确率表现

**包含内容**:
- with_mask（戴口罩正确）的准确率
- without_mask（不戴口罩）的准确率
- mask_incorrect（口罩佩戴不正确）的准确率

**解读**:
- 对比两个模型在各类别上的表现
- 识别哪个类别最容易被误分类
- 帮助优化模型针对性地改进弱点

**关键观察点**:
- 是否存在类别不平衡问题
- 哪个模型在某个特定类别表现更好
- 是否需要增加特定类别的训练数据

---

## 3️⃣ 图表3: 混淆矩阵热力图 (图表3_混淆矩阵热力图.png)

**图表类型**: 热力图（Heatmap）

**目的**: 详细展示模型的分类结果，识别误分类模式

**包含内容**:
- SVM模型的混淆矩阵
- ResNet18模型的混淆矩阵
- 对角线显示正确分类（深色表示高百分比）
- 非对角线显示误分类情况

**解读**:
- 对角线越深（颜色越深），正确率越高
- 非对角线数值表示误分类的类别对
- 例如，如果第0行第1列数值高，说明"戴口罩"被误分为"不戴口罩"的情况较多

**改进方向**:
- 观察最常见的误分类对，针对性地调整阈值
- 增加易混淆类别的训练样本
- 调整模型参数以改进特定类别的识别

---

## 4️⃣ 图表4: 数据集分布 (图表4_数据集分布.png)

**图表类型**: 分组柱状图

**目的**: 展示训练集、验证集、测试集中各类别的样本分布

**包含内容**:
- 训练集各类别的样本数量
- 验证集各类别的样本数量
- 测试集各类别的样本数量

**解读**:
- 检查数据集是否平衡
- 确保各集中各类别比例相近
- 样本总数影响模型的泛化能力

**数据质量指标**:
- 类别比例相近 ✓ 数据集较平衡
- 比例差异大 ⚠️ 可能需要数据增强或采样调整
- 样本数量充足（每类>100） ✓ 有利于模型训练

---

## 5️⃣ 图表5: 分类评估指标 (图表5_分类评估指标.png)

**图表类型**: 分组柱状图

**目的**: 从多维度（精准率、召回率、F1分数）评估模型性能

**包含内容**:
- **Precision（精准率）**: 预测为该类的样本中，实际为该类的比例
  - 公式: TP / (TP + FP)
  - 关注"误报"问题
  
- **Recall（召回率）**: 实际为该类的样本中，被正确预测的比例
  - 公式: TP / (TP + FN)
  - 关注"漏报"问题
  
- **F1-Score（F1分数）**: 精准率和召回率的调和平均值
  - 综合评价模型性能

**解读**:
- 三个指标都接近1.0，说明模型性能最好
- 如果某个类别的这些指标都较低，需要特别关注
- Precision高但Recall低：容易漏报；Precision低但Recall高：容易误报

**应用场景**:
- **精准率重要**: 口罩检测警告系统（减少误报）
- **召回率重要**: 安全监控系统（减少漏报）
- **F1分数**：需要平衡精准率和召回率的场景

---

## 📈 使用建议

### 1. 快速了解模型性能
- 查看图表1了解整体准确率
- 查看图表5了解综合评估指标

### 2. 诊断模型问题
- 查看图表2找出弱点类别
- 查看图表3确定具体误分类模式

### 3. 优化数据集
- 查看图表4检查数据分布是否平衡
- 针对不足的类别增加训练样本

### 4. 模型改进方向
- 如果图表2中某类准确率低，考虑增加该类的训练数据
- 如果图表3中存在特定的误分类模式，考虑调整模型参数
- 如果图表5中某类的F1分数低，考虑使用正负样本权重均衡

---

## 🔧 如何重新生成图表

### 方法1: 运行完整训练（生成真实结果）
```bash
python mask_detection_complete.py
```
这会自动在训练完成后生成所有图表

### 方法2: 仅测试可视化（快速演示）
```bash
python test_visualization.py
```
这会使用模拟数据快速生成图表

---

## 📊 数据说明

### 类别定义
1. **with_mask**: 正确佩戴口罩的人脸
2. **without_mask**: 没有佩戴口罩的人脸
3. **mask_incorrect**: 口罩佩戴不正确的人脸（如只遮住嘴不遮住鼻子）

### 数据集划分
- **训练集**: 70% 用于模型训练
- **验证集**: 15% 用于超参数调整
- **测试集**: 15% 用于最终性能评估

---

## 💡 常见问题

**Q: 为什么准确率不是100%？**
A: 实际应用中完全准确是不可能的。机器学习模型的性能受以下因素影响：
- 训练数据的质量和数量
- 模型的复杂度
- 超参数的选择
- 类别之间的重叠（某些人脸在口罩遮挡下确实难以区分）

**Q: 两个模型准确率相差很大怎么办？**
A: 可以尝试：
1. 增加深度学习模型的训练轮次
2. 调整学习率和正则化参数
3. 使用数据增强技术
4. 尝试其他模型架构（如ResNet50、MobileNet等）

**Q: 如何处理类别不平衡问题？**
A: 可以采用以下方法：
1. 使用 weighted_cross_entropy_loss（加权损失函数）
2. 过采样少数类或欠采样多数类
3. 使用 class_weight 参数
4. 使用数据增强只对少数类应用

---

## 📝 输出文件说明

所有图表都保存为 **PNG 格式**，分辨率 **300 dpi**，适合打印和报告展示。

文件列表：
- `图表1_模型准确率对比.png` - 柱状图，展示模型整体性能
- `图表2_各类别准确率对比.png` - 分组柱状图，展示类别级别的性能
- `图表3_混淆矩阵热力图.png` - 热力图，展示分类细节
- `图表4_数据集分布.png` - 柱状图，展示数据集构成
- `图表5_分类评估指标.png` - 分组柱状图，展示多维度指标

---

**生成时间**: 2025-12-12
**项目**: 模式识别课程作业 - 口罩检测
**使用模型**: SVM (HOG) + ResNet18
